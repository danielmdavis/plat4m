{"ast":null,"code":"var _jsxFileName = \"/Users/daniel/Projects/plat4m/client/src/Addendum.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Card from '@material-ui/core/Card';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Addendum(props) {\n  function stateUpdater(id, id2, dir) {\n    props.allData.forEach(item => {\n      if (item.id === id) {\n        item.addenda.forEach(addendum => {\n          if (addendum.id === id2) {\n            addendum[dir] = addendum[dir] + 1;\n          }\n        });\n      }\n    });\n    props.updater([...props.allData]);\n  }\n  const incrementYes = (id, id2) => {\n    fetch(`http://localhost:3001/${id}/${id2}`, {\n      method: 'POST',\n      mode: 'cors',\n      headers: {\n        'Access-Control-Allow-Origin': '*',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        'vote': 'up'\n      }),\n      json: true\n    });\n    stateUpdater(id, id2, 'ups');\n  };\n  const incrementNo = (id, id2) => {\n    fetch(`http://localhost:3001/${id}/${id2}`, {\n      method: 'POST',\n      mode: 'cors',\n      headers: {\n        'Access-Control-Allow-Origin': '*',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        'vote': 'down'\n      }),\n      json: true\n    });\n    stateUpdater(id, id2, 'downs');\n  };\n  function handleClickYes() {\n    incrementYes(props.propId, props.id);\n    if (props.predicate && props.ups > props.majority - 1) {\n      props.incrementYes(props.propId);\n    }\n  }\n  function handleClickNo() {\n    incrementNo(props.propId, props.id);\n    if (props.predicate && props.downs > props.majority - 1) {\n      props.incrementNo(props.propId);\n    }\n  }\n  let status; // three-way style assignment for vote status\n  if (props.ups > props.majority) {\n    status = 'passed-addendum';\n  } else if (props.downs > props.majority) {\n    if (!props.showClosed) {\n      status = 'hidden-failed-addendum';\n    } else {\n      status = 'failed-addendum';\n    }\n  } else {\n    status = 'open-addendum';\n  }\n  let statusVariant; // mui specific assignment\n  statusVariant = props.ups > props.majority || props.downs > props.majority ? 'outlined' : 'contained';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `addendum ${status}`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flexDirection: 'column'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        className: \"add-button\",\n        variant: \"contained\",\n        color: \"secondary\",\n        style: {\n          marginTop: '-6px'\n        },\n        onClick: handleClickNo,\n        children: \"No\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          cursor: 'not-allowed',\n          pointerEvents: 'none'\n        },\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          className: \"add-button\",\n          style: {\n            fontSize: '16px',\n            border: 'solid 1.7px',\n            maxHeight: '36.5px',\n            marginTop: '2px'\n          },\n          variant: \"outlined\",\n          color: \"secondary\",\n          children: props.downs\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      className: \"addendum-inner\",\n      variant: statusVariant,\n      style: {\n        backgroundColor: 'rgb(190, 190, 190)',\n        border: props.predicate && (props.ups < props.majority || props.down < props.majority) ? 'solid 1.7px rgb(246,0,87)' : 'none'\n      },\n      children: props.claim\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flexDirection: 'column'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        className: \"add-button\",\n        variant: \"contained\",\n        color: \"primary\",\n        style: {\n          marginTop: '-6px'\n        },\n        onClick: handleClickYes,\n        children: \"Yes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          cursor: 'not-allowed',\n          pointerEvents: 'none'\n        },\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          className: \"add-button\",\n          style: {\n            fontSize: '16px',\n            border: 'solid 1.7px',\n            maxHeight: '36.5px',\n            marginTop: '2px'\n          },\n          variant: \"outlined\",\n          color: \"primary\",\n          children: props.ups\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n}\n_c = Addendum;\nvar _c;\n$RefreshReg$(_c, \"Addendum\");","map":{"version":3,"names":["React","useState","useEffect","Button","Card","Addendum","props","stateUpdater","id","id2","dir","allData","forEach","item","addenda","addendum","updater","incrementYes","fetch","method","mode","headers","body","JSON","stringify","json","incrementNo","handleClickYes","propId","predicate","ups","majority","handleClickNo","downs","status","showClosed","statusVariant","flexDirection","marginTop","cursor","pointerEvents","fontSize","border","maxHeight","backgroundColor","down","claim"],"sources":["/Users/daniel/Projects/plat4m/client/src/Addendum.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Card from '@material-ui/core/Card';\n\nexport default function Addendum(props) {\n\n  function stateUpdater(id, id2, dir) {\n    props.allData.forEach((item) => { \n      if (item.id === id) { \n        item.addenda.forEach((addendum) => {\n          if (addendum.id === id2) {\n            addendum[dir] = addendum[dir] + 1\n          }\n        })\n    } })\n    props.updater([...props.allData])\n  }\n\n  const incrementYes = (id, id2) => {\n    fetch(`http://localhost:3001/${id}/${id2}`, {\n      method: 'POST',\n      mode: 'cors',\n      headers: {\n        'Access-Control-Allow-Origin': '*',\n        'Content-Type': 'application/json'\n       },\n      body: JSON.stringify({ 'vote': 'up' }),\n      json: true\n    })\n    stateUpdater(id, id2, 'ups')\n  }\n  const incrementNo = (id, id2) => {\n    fetch(`http://localhost:3001/${id}/${id2}`, {\n      method: 'POST',\n      mode: 'cors',\n      headers: {\n        'Access-Control-Allow-Origin': '*',\n        'Content-Type': 'application/json'\n       },\n      body: JSON.stringify({ 'vote': 'down' }),\n      json: true\n    })\n    stateUpdater(id, id2, 'downs')\n  }\n\n  function handleClickYes() { \n    incrementYes(props.propId, props.id) \n    if (props.predicate && props.ups > props.majority - 1) { props.incrementYes(props.propId) }\n  }\n  function handleClickNo() { \n    incrementNo(props.propId, props.id) \n    if (props.predicate && props.downs > props.majority - 1) { props.incrementNo(props.propId) }\n  }\n\n  let status // three-way style assignment for vote status\n  if (props.ups > props.majority) {\n    status = 'passed-addendum'\n  } else if (props.downs > props.majority) {\n    if (!props.showClosed) {\n      status = 'hidden-failed-addendum'\n    } else {\n      status = 'failed-addendum'\n    }\n  } else {\n    status = 'open-addendum'\n  }\n  let statusVariant // mui specific assignment\n  statusVariant = (props.ups > props.majority || props.downs > props.majority) ? 'outlined' : 'contained'\n\n  return (\n    <div className={`addendum ${status}`}>\n      <div style={{ flexDirection: 'column' }}>\n        <Button className='add-button'\n          variant=\"contained\"\n          color=\"secondary\"\n          style={{ marginTop: '-6px' }}\n          onClick={handleClickNo}\n        >\n          No\n        </Button>\n        <br />\n        <span style={{ cursor: 'not-allowed', pointerEvents: 'none' }}>\n          <Button className='add-button'\n            style={{ fontSize: '16px', border: 'solid 1.7px', maxHeight: '36.5px', marginTop: '2px' }}\n            variant=\"outlined\"\n            color=\"secondary\"\n          >\n            {props.downs}\n          </Button>\n        </span>\n      </div>\n      <Card className='addendum-inner' variant={statusVariant} \n        style={{ \n          backgroundColor: 'rgb(190, 190, 190)',\n          border: (props.predicate && (props.ups < props.majority || props.down < props.majority) ) ? 'solid 1.7px rgb(246,0,87)' : 'none'\n        }}>\n        {props.claim}\n      </Card>\n      <div style={{ flexDirection: 'column' }}>\n        <Button className='add-button'\n          variant=\"contained\"\n          color=\"primary\"\n          style={{ marginTop: '-6px' }}\n          onClick={handleClickYes}\n        >\n          Yes\n        </Button>\n        <br />\n        <span style={{ cursor: 'not-allowed', pointerEvents: 'none' }}>\n          <Button className='add-button'\n            style={{ fontSize: '16px', border: 'solid 1.7px',  maxHeight: '36.5px', marginTop: '2px' }}\n            variant=\"outlined\"\n            color=\"primary\"\n          >\n            {props.ups}\n          </Button>\n        </span>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}